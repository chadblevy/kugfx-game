:root{
  --bg:#0e0f13; --panel:#171823; --muted:#2a2c3b; --text:#e9edf1;
  --accent:#ffd166; --accent-2:#5eead4; --danger:#ef4444; --gold:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif; color:var(--text); background:var(--bg);}

.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:.75rem 1rem; border-bottom:1px solid var(--muted); background:linear-gradient(180deg,#13141d,#0f1017);
  position:sticky; top:0; z-index:10;
}
.brand{font-weight:700; letter-spacing:.3px}
.controls{display:flex; gap:.5rem; align-items:center}
.input{
  background:#0f1118; border:1px solid var(--muted); color:var(--text); border-radius:.5rem; padding:.5rem .6rem; min-width:14rem;
}

.btn{border:1px solid var(--muted); background:#151726; color:var(--text); padding:.5rem .75rem; border-radius:.55rem; cursor:pointer}
.btn:hover{border-color:#3b3f57}
.btn--primary{background:linear-gradient(180deg,#334155,#1f2937); border-color:#3b4a5f}
.btn--ghost{background:transparent}

.layout{display:grid; grid-template-columns: 280px 1fr; height:calc(100vh - 56px);}

.sidebar{
  border-right:1px solid var(--muted); padding:1rem; background:var(--panel); overflow:auto;
}
.sidebar h2{margin:.25rem 0 .5rem; font-size:1rem; opacity:.9}
.badgeShelf{list-style:none; padding:0; margin:.25rem 0 1rem; display:grid; grid-template-columns:1fr; gap:.5rem}
.badgeShelf li{
  background:linear-gradient(135deg,#1c1f30,#23263a); border:1px solid #2d3147; border-radius:.6rem; padding:.5rem .6rem; display:flex; gap:.5rem; align-items:center; box-shadow:0 6px 18px rgba(0,0,0,.25);
}
.badgeEmoji{font-size:1.1rem}
.badgeName{font-weight:600}

.progressList{margin:.25rem 0 0; padding-left:1rem}
.progressList li{margin:.25rem 0; opacity:.9}
.progressList li.done{color:var(--accent-2)}
.progressList li.locked{opacity:.5}

.viewport{
  position:relative; overflow:hidden; background:radial-gradient(1200px 600px at 50% 60%, #171a27, #0e0f13 60%);
}
.mapStrip{
  height:100%; display:flex; transition:transform .6s ease; will-change:transform;
}
.slide{
  position:relative; 
  flex:0 0 100%; 
  height:100%;
  display:flex; 
  align-items:center; 
  justify-content:center; /* center content horizontally and vertically */
  background:#0b0c11;
  overflow:hidden;
}
.slide::after{ /* slight vignette */
  content:""; position:absolute; inset:0; pointer-events:none; box-shadow:inset 0 0 120px rgba(0,0,0,.5);
}

/* Room images - scale individually per JS */
.roomImage{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
  transition: transform 0.3s ease;
}

.slideTitle{
  position:absolute; left:1rem; top:1rem; font-weight:700; letter-spacing:.3px; text-shadow:0 2px 8px #000;
}

.lockOverlay{
  position:absolute; inset:0; background:rgba(0,0,0,.6); backdrop-filter:blur(2px);
  display:flex; align-items:center; justify-content:center; gap:.5rem; font-weight:700; color:#cbd5e1; border-left:2px dashed #3b3f57; border-right:2px dashed #3b3f57;
  transition:opacity .4s ease;
}
.lockOverlay .tag{background:#111827; border:1px solid #374151; padding:.35rem .6rem; border-radius:.5rem; font-size:.9rem}

.npc{
  position:absolute; right:1rem; bottom:1rem; font-size:1.6rem; cursor:pointer;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.45));
  transition: transform .2s ease;
}
.npc:hover{transform:translateY(-2px)}

/* nav buttons */
.navBtn{
  position:absolute; top:50%; transform:translateY(-50%); z-index:2;
  background:rgba(15,16,26,.6); border:1px solid #2b2f46; color:var(--text);
  width:44px; height:44px; border-radius:50%; cursor:pointer; backdrop-filter:blur(4px);
}
.navBtn:hover{background:rgba(20,22,32,.8)}
.navBtn--left{left:.75rem}
.navBtn--right{right:.75rem}
.navBtn:disabled{opacity:.35; cursor:not-allowed}

/* dialog */
.dialog::backdrop{background:rgba(0,0,0,.6)}
.dialog{border:none; border-radius:.8rem; padding:0; background:#0f1322; color:var(--text); width:min(560px, 92vw)}
.dialogBody{padding:1rem 1.25rem}
.dialogBody h3{margin:0 0 .25rem}
.dialogBody p{opacity:.9}
.dialogActions{display:flex; justify-content:flex-end; gap:.5rem; margin-top:1rem}

.taskList{margin:.5rem 0 0; padding-left:1.2rem}
.taskList li{margin:.25rem 0}
